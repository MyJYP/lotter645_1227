#!/bin/bash

# ë¡œë˜ 645 ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸

echo "=========================================="
echo "  ë¡œë˜ 645 ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘"
echo "=========================================="
echo ""

# ê°€ìƒí™˜ê²½ í™œì„±í™” í™•ì¸
if [ ! -d "venv" ]; then
    echo "âŒ ê°€ìƒí™˜ê²½ì´ ì—†ìŠµë‹ˆë‹¤."
    echo "ë¨¼ì € ./setup.shë¥¼ ì‹¤í–‰í•˜ì—¬ í™˜ê²½ì„ ì„¤ì •í•´ì£¼ì„¸ìš”."
    exit 1
fi

# ê°€ìƒí™˜ê²½ í™œì„±í™”
echo "ğŸ”„ ê°€ìƒí™˜ê²½ í™œì„±í™” ì¤‘..."
source venv/bin/activate

# íŒ¨í‚¤ì§€ í™•ì¸ ë° ì„¤ì¹˜
echo "ğŸ“¦ í•„ìš”í•œ íŒ¨í‚¤ì§€ í™•ì¸ ì¤‘..."
if ! python -c "import streamlit" 2>/dev/null; then
    echo "âš ï¸  Streamlitì´ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„¤ì¹˜ ì¤‘..."
    pip install -r requirements.txt
fi

echo ""
echo "=========================================="
echo "  ì›¹ ì„œë²„ ì‹œì‘"
echo "=========================================="
echo ""
echo "ğŸŒ ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì—´ë¦½ë‹ˆë‹¤..."
echo "ğŸ“ ì£¼ì†Œ: http://localhost:8501"
echo ""
echo "ì¢…ë£Œí•˜ë ¤ë©´: Ctrl+C"
echo ""

# Streamlit ì‹¤í–‰
cd src
streamlit run web_app.py

# ê°€ìƒí™˜ê²½ ë¹„í™œì„±í™”
deactivate
