# π“… λ΅λ 645 MCP μ„λ²„ κµ¬μ¶• λ° Gemini μ—°λ™ κ³„νμ„

**ν”„λ΅μ νΈλ…:** Lotto 645 AI Agent Server (MCP & Gemini)
**μ‘μ„±μΌ:** 2026λ…„ 2μ›” 14μΌ
**λ©ν‘:** κΈ°μ΅΄ μ›Ή μ•±μ λ¶„μ„ λ΅μ§μ„ MCP μ„λ²„λ΅ μ΄μ‹ν•μ—¬ Claude λ° Geminiμ™€ κ°™μ€ AI μ—μ΄μ „νΈκ°€ λ„κµ¬λ΅ ν™μ©ν•  μ μλ„λ΅ ν•¨.

---

## 1. ν”„λ΅μ νΈ κ°μ”

κΈ°μ΅΄ **Streamlit μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…**μ€ μ‚¬λμ΄ λ²„νΌμ„ λλ¬ κ²°κ³Όλ¥Ό ν™•μΈν•λ” κµ¬μ΅°μ…λ‹λ‹¤. μ΄λ¥Ό **MCP(Model Context Protocol) μ„λ²„**λ΅ μ „ν™ν•μ—¬, AIκ°€ μ¤μ¤λ΅ λ°μ΄ν„°λ¥Ό μ΅°νν•κ³  λ¶„μ„ λ„κµ¬λ¥Ό νΈμ¶ν•μ—¬ μ‚¬μ©μμ—κ² λ‹µλ³€μ„ μ κ³µν•λ” **AI μ—μ΄μ „νΈ μ‹μ¤ν…**μΌλ΅ μ§„ν™”μ‹ν‚µλ‹λ‹¤.

νΉν, **Gemini**μ™€μ μ—°λ™μ„ κ³ λ ¤ν•μ—¬ λ€μ©λ‰ μ»¨ν…μ¤νΈ μ²λ¦¬ λ° Function Calling νΈν™μ„±μ„ ν™•λ³΄ν•©λ‹λ‹¤.

---

## 2. λ‹¨κ³„λ³„ μƒμ„Έ μ‘μ—… κ³„ν (Roadmap)

### 1λ‹¨κ³„: ν•µμ‹¬ λ΅μ§ λ¶„λ¦¬ (Core Refactoring) π› οΈ

**λ©ν‘:** UI(`streamlit`)μ™€ λΉ„μ¦λ‹μ¤ λ΅μ§μ μ™„μ „ν• λ¶„λ¦¬.

- **μ‘μ—… 1.1: λ””λ ‰ν† λ¦¬ κµ¬μ΅° μ¬νΈ**
  - `src/core/` ν¨ν‚¤μ§€ μƒμ„±.
  - `data_loader.py`, `analysis.py`, `recommender.py` λ“±μ„ `src/core/`λ΅ μ΄λ™ λ° μ •λ¦¬.
- **μ‘μ—… 1.2: UI μμ΅΄μ„± μ κ±°**
  - λ¶„μ„ ν•¨μ λ‚΄μ `st.write()`, `st.sidebar` λ“±μ μ½”λ“λ¥Ό μ κ±°ν•κ³ , μμ λ°μ΄ν„°(Dict, List, DataFrame)λ¥Ό λ°ν™ν•λ„λ΅ μμ •.
  - μ: `recommend_numbers()` ν•¨μκ°€ ν™”λ©΄μ— μ¶λ ¥ν•λ” λ€μ‹  `List[int]`λ¥Ό λ°ν™ν•λ„λ΅ λ³€κ²½.

### 2λ‹¨κ³„: MCP μ„λ²„ κµ¬ν„ (MCP Server Implementation) π€

**λ©ν‘:** Claude λ“± MCP ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ† κ°€λ¥ν• μ„λ²„ κµ¬μ¶•.

- **μ‘μ—… 2.1: ν™κ²½ μ„¤μ •**
  - `mcp` λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ (`pip install mcp`).
  - μ„λ²„ μ§„μ…μ  νμΌ `src/mcp_server.py` μƒμ„±.
- **μ‘μ—… 2.2: λ¦¬μ†μ¤(Resources) κµ¬ν„**
  - `lotto://data/history`: μ „μ²΄ λ‹Ήμ²¨ λ‚΄μ—­ CSV λ°μ΄ν„° μ κ³µ.
  - `lotto://data/latest`: μµμ‹  νμ°¨ μ”μ•½ μ •λ³΄ μ κ³µ.
- **μ‘μ—… 2.3: λ„κµ¬(Tools) κµ¬ν„**
  - `get_winning_numbers(round: int)`: νΉμ • νμ°¨ λ‹Ήμ²¨ λ²νΈ μ΅°ν.
  - `analyze_number(number: int)`: νΉμ • λ²νΈ λ¶„μ„ μ •λ³΄(μ¶ν„ λΉλ„ λ“±) λ°ν™.
  - `recommend_lotto_numbers(strategy: str, count: int)`: λ²νΈ μ¶”μ² λ΅μ§ νΈμ¶.
  - `check_my_numbers(numbers: List[int])`: λ‚΄ λ²νΈ λ‹Ήμ²¨ μ΄λ ¥ ν™•μΈ.

### 3λ‹¨κ³„: Gemini μ—°λ™ κ³„ν (Gemini Integration Strategy) β™

**λ©ν‘:** Google Gemini λ¨λΈμ΄ MCP λ„κµ¬λ¥Ό μ‚¬μ©ν•  μ μλ„λ΅ νΈν™μ„± ν™•λ³΄ λ° μ–΄λ‘ν„° λ§λ ¨.

- **μ „λµ 3.1: Tool Schema νΈν™μ„± ν™•λ³΄**
  - Geminiμ Function Callingμ€ JSON Schemaλ¥Ό μ—„κ²©ν•κ² λ”°λ¦…λ‹λ‹¤.
  - MCP Tool μ •μ μ‹ `Docstring`κ³Ό `Type Hint`λ¥Ό λ…ν™•ν•κ² μ‘μ„±ν•μ—¬ Geminiκ°€ λ„κµ¬μ μ‚¬μ©λ²•μ„ μ •ν™•ν μ΄ν•΄ν•λ„λ΅ ν•©λ‹λ‹¤.
- **μ „λµ 3.2: Gemini-MCP λΈλ¦Ώμ§€ (Bridge) κµ¬μ„±**
  - Geminiλ” ν„μ¬ μ§μ ‘μ μΈ MCP ν΄λΌμ΄μ–ΈνΈκ°€ μ•„λ‹λ―€λ΅, Python μ¤ν¬λ¦½νΈ λ‚΄μ—μ„ **Gemini API**μ™€ **MCP Client**λ¥Ό μ—°κ²°ν•λ” λ΅μ§μ΄ ν•„μ”ν•©λ‹λ‹¤.
  - **μ›ν¬ν”λ΅μ°:**
    1.  μ‚¬μ©μ μ§λ¬Έ -> Geminiμ—κ² μ „λ‹¬ (MCP Tool μ •μ ν¬ν•¨).
    2.  Geminiκ°€ `Function Call` μ”μ²­ λ°ν™.
    3.  Python μ¤ν¬λ¦½νΈκ°€ ν•΄λ‹Ή μ”μ²­μ„ λ°›μ•„ λ΅μ»¬ MCP μ„λ²„μ ν•¨μ μ‹¤ν–‰.
    4.  μ‹¤ν–‰ κ²°κ³Ό -> Geminiμ—κ² μ „λ‹¬.
    5.  Geminiκ°€ μµμΆ… λ‹µλ³€ μƒμ„±.
- **μ „λµ 3.3: λ€μ©λ‰ μ»¨ν…μ¤νΈ ν™μ©**
  - Geminiμ κΈ΄ μ»¨ν…μ¤νΈ μλ„μ°λ¥Ό ν™μ©ν•μ—¬, `lotto://data/history` λ¦¬μ†μ¤(CSV μ „μ²΄)λ¥Ό ν”„λ΅¬ν”„νΈμ— μ§μ ‘ μ£Όμ…ν•μ—¬ λ³µμ΅ν• ν¨ν„΄ λ¶„μ„μ„ μ”μ²­ν•λ” μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ.

### 4λ‹¨κ³„: ν…μ¤νΈ λ° λ°°ν¬ (Testing & Deployment) β…

- **μ‘μ—… 4.1: Claude Desktop ν…μ¤νΈ**
  - `claude_desktop_config.json`μ— λ΅μ»¬ MCP μ„λ²„ λ“±λ΅ λ° ν…μ¤νΈ.
- **μ‘μ—… 4.2: Gemini API ν…μ¤νΈ**
  - `google-generativeai` λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν• ν…μ¤νΈ μ¤ν¬λ¦½νΈ μ‘μ„± (`tests/test_gemini_mcp.py`).
- **μ‘μ—… 4.3: μµμΆ… λ°°ν¬**
  - `run_mcp.sh` μ¤ν¬λ¦½νΈ μ‘μ„±.

---

## 3. κµ¬ν„ μμ • νμΌ κµ¬μ΅°

```text
lotter645_1227/
β”β”€β”€ Data/
β”‚   β””β”€β”€ 645_251227.csv
β”β”€β”€ src/
β”‚   β”β”€β”€ core/                 # UI μ—†λ” μμ λ΅μ§
β”‚   β”‚   β”β”€β”€ data_loader.py
β”‚   β”‚   β”β”€β”€ analyzer.py
β”‚   β”‚   β””β”€β”€ recommender.py
β”‚   β”β”€β”€ mcp_server.py         # MCP μ„λ²„ μ§„μ…μ 
β”‚   β””β”€β”€ web_app.py            # κΈ°μ΅΄ μ›Ή μ•± (core λ¨λ“ μ¬μ‚¬μ©ν•λ„λ΅ μμ •)
β”β”€β”€ tests/
β”‚   β””β”€β”€ test_gemini_mcp.py    # Gemini μ—°λ™ ν…μ¤νΈ μ¤ν¬λ¦½νΈ
β”β”€β”€ requirements.txt
β””β”€β”€ MCP_Project_Plan.md       # λ³Έ κ³„νμ„
```

---

## 4. Gemini μ—°λ™ μμ‹ μ½”λ“ (Concept)

Geminiλ” `google-generativeai` λΌμ΄λΈλ¬λ¦¬λ¥Ό ν†µν•΄ Function Callingμ„ μ§€μ›ν•©λ‹λ‹¤. MCP μ„λ²„μ Tool μ •μλ¥Ό Geminiμ `tools` νλΌλ―Έν„°λ΅ λ³€ν™ν•μ—¬ μ£Όμ…ν•λ©΄, Geminiκ°€ μμ—°μ–΄ λ€ν™” μ¤‘ μ μ ν• μ‹μ μ— ν•¨μ νΈμ¶μ„ μ”μ²­ν•κ² λ©λ‹λ‹¤.

μ΄ κ³„νμ— λ”°λΌ `src/core` λ¦¬ν©ν† λ§λ¶€ν„° μ‹μ‘ν•λ©΄ λ©λ‹λ‹¤.
