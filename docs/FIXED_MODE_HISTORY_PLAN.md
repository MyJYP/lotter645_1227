# 💾 고정 모드 이력 저장 시스템 (Fixed Mode History) 구축 계획

## 1. 개요

사용자가 '고정 모드' (특히 '최적 조합만' 옵션 사용 시)에서 생성한 추천 번호를 회차별로 저장하고 관리할 수 있는 기능을 추가합니다. 이를 통해 사용자는 매주 자신이 선택한 고정 번호를 기록하고, 추후 당첨 여부를 쉽게 확인할 수 있습니다.

## 2. 검토 결과 (Feasibility Review)

- **가능 여부**: ✅ **가능**
- **구현 난이도**: 🟢 **하 (Low)**
- **필요 리소스**:
  - 데이터 저장소: 로컬 CSV 파일 (`Data/fixed_mode_history.csv`) 활용.
  - UI 요소: '저장하기' 버튼 및 '이력 조회' 탭 추가.

## 3. 상세 기능 명세

### 3.1. 데이터 저장 구조

- **파일**: `Data/fixed_mode_history.csv`
- **컬럼**:
  - `round`: 회차 (예: 1206)
  - `date`: 저장 일시 (YYYY-MM-DD HH:MM:SS)
  - `strategy`: 사용된 전략 (예: Hybrid, Ensemble)
  - `numbers`: 번호 조합 (예: "1, 2, 3, 4, 5, 6")
  - `memo`: 사용자 메모 (선택 사항)

### 3.2. UI/UX 설계

1.  **저장 버튼**:
    - '번호 추천' 페이지의 결과 화면 하단에 **"💾 이 조합 저장하기"** 버튼 추가.
    - 버튼 클릭 시 저장 완료 메시지 표시 (`st.toast` 활용).
2.  **이력 조회 탭**:
    - '번호 추천' 페이지 내에 **"📜 저장된 이력"** 탭 또는 Expander 추가.
    - 회차별로 저장된 번호를 테이블 형태로 표시.
    - (선택 사항) CSV 다운로드 기능 제공.

## 4. 작업 로드맵 (Roadmap)

### Phase 1: 데이터 관리 모듈 구현 (Backend)

- [x] `src/history_manager.py` 생성.
- [x] `save_history(round, strategy, numbers)`: CSV에 데이터 추가.
- [x] `load_history()`: CSV에서 데이터 읽기.
- [x] `delete_history(index)`: 특정 이력 삭제.

### Phase 2: UI 연동 (Frontend)

- [x] `src/web_app.py`의 `recommendation_page` 수정.
- [x] 고정 모드 결과 출력 부분에 저장 버튼 배치.
- [x] 저장된 이력을 보여주는 UI 컴포넌트 추가.

## 5. 기대 효과

- **사용자 편의성**: 매주 생성한 번호를 따로 메모할 필요 없이 시스템 내에서 관리.
- **데이터 자산화**: 개인의 추천 전략 히스토리를 쌓아 나만의 데이터베이스 구축.

## 6. 최종 완료

고정 모드 이력 저장 시스템의 구현 및 테스트가 성공적으로 완료되었습니다. (2026-02-07)
