# 🎰 로또 645 데이터 분석 & 번호 추천 시스템

로또 645 당첨 데이터를 분석하고, 머신러닝과 통계적 기법을 활용하여 번호를 추천하는 파이썬 기반 웹 애플리케이션입니다.

## ✨ 주요 기능

### 1. 📊 데이터 탐색

- **기본 통계**: 번호별 출현 빈도, 구간별/홀짝 분포, 연속 번호 패턴 등
- **시계열 분석**: 최근 핫/콜드 넘버, 미출현 기간, 이동 평균 트렌드
- **패턴 분석**: 동반 출현 번호(궁합수), 상극수, 소수/합성수 비율

### 2. 🎯 번호 추천 (8가지 전략)

- **⭐ 하이브리드**: 5가지 전략을 결합한 최고 품질 추천
- **🛡️ 안정형 (Safe)**: 원금 보존을 목표로 하는 안정적 조합 (5등 당첨 확률 극대화)
- **📊 점수 기반**: 머신러닝 모델 점수 상위 번호 조합
- **🎲 확률 가중치**: 점수 기반 가중치 랜덤 샘플링
- **🎨 그리드/이미지 패턴**: 용지상의 기하학적 패턴 및 시각적 균형 고려
- **🔄 패턴/연속**: 빈출 패턴 및 연속 번호 포함 전략

### 3. 🎲 번호 테마

- **코어 번호**: 신뢰도 85% 이상의 핵심 번호 3~4개 추출
- **고정 번호**: 사용자 지정 번호와 최적의 보완 번호 조합
- **신뢰도 점수**: 전체 번호의 출현 가능성 등급화 (S/A/B/C)

### 4. 🍀 나의 번호 (NEW)

- **당첨 연대기**: 내 번호의 과거 당첨 이력 및 수익률 시뮬레이션
- **알고리즘 진단**: 현재 조합의 점수 평가 및 약점 분석
- **교체 제안**: 더 높은 확률의 번호로 즉시 교체 제안

### 5. 🔬 백테스팅 & 최적화 (프리미엄)

- **과거 데이터 검증**: 알고리즘의 실제 당첨 확률 검증
- **가중치 최적화**: Random Search + Grid Search로 최적 파라미터 자동 탐색
- **실시간 재학습**: 최신 데이터를 반영한 모델 업데이트
- **액세스 코드 인증**: 고급 기능에 대한 접근 제어 및 보안

### 6. 🔄 데이터 관리

- **자동 업데이트**: 동행복권 웹사이트 크롤링
- **텍스트 파싱**: 당첨 결과 텍스트 복사-붙여넣기로 간편 업데이트
- **자동 백업**: 데이터 수정 시 자동 백업 생성

### 7. 📱 모바일 최적화

- **반응형 디자인**: 모바일 화면에서도 깨지지 않는 레이아웃
- **터치 친화적 UI**: 스마트폰 사용성을 고려한 인터페이스

## �🚀 설치 및 실행

### 필수 요건

- Python 3.9 이상 (3.10 권장)

### 설치

```bash
# 저장소 클론
git clone https://github.com/MyJYP/lotter645_1227.git
cd lotter645-1227

# 가상환경 생성 및 활성화 (선택사항)
python -m venv venv
source venv/bin/activate  # Mac/Linux
# venv\Scripts\activate  # Windows

# 의존성 패키지 설치
pip install -r requirements.txt
```

### 실행

```bash
# 웹 애플리케이션 실행
streamlit run src/web_app.py
```

또는 제공된 스크립트 사용:

```bash
./run_web.sh
```

## 📂 프로젝트 구조

```
lotter645_1227/
├── Data/                   # 로또 데이터 (CSV) 및 백업
├── src/                    # 소스 코드
│   ├── web_app.py          # 메인 웹 애플리케이션
│   ├── data_loader.py      # 데이터 로드 및 전처리
│   ├── prediction_model.py # 예측 모델 및 점수 계산
│   ├── recommendation_system.py # 번호 추천 알고리즘
│   ├── backtesting_system.py # 백테스팅 엔진
│   ├── pattern_analysis.py # 패턴 분석
│   └── ...
├── Blog/                   # 개발 과정 기록 (에피소드)
├── output/                 # 생성된 차트 및 결과물
└── requirements.txt        # 의존성 패키지 목록
```

## 🛠️ 기술 스택

- **Language**: Python
- **Web Framework**: Streamlit
- **Data Analysis**: Pandas, NumPy, Scikit-learn
- **Visualization**: Plotly, Matplotlib, Seaborn
- **Utils**: BeautifulSoup4 (Crawling), Pillow (Image)

## 📝 라이선스

이 프로젝트는 MIT 라이선스를 따릅니다.

---

_주의: 로또는 독립 시행이므로 과거의 데이터가 미래의 결과를 보장하지 않습니다. 본 프로젝트는 통계 분석 및 프로그래밍 학습 목적으로 제작되었습니다._- 🎯 백테스팅 Tab 2 (가중치 최적화) 및 Tab 3 (실시간 재학습)에 프리미엄 접근 제어 적용

- 🏠 환경 자동 감지: 로컬/서버 구분 (USER=appuser 기반)
- 🔧 개발자 모드: `LOTTO_DEV_MODE=true` 환경변수로 로컬 테스트 간편화
- 🔒 보안 강화: Secrets 파일 Git 제외, 자동 백업
- 📝 테스트 스크립트 추가: `test_local_premium.sh`, `src/test_premium_auth.py`

## v6.2.0 (2026-02-07)

- ✅ **'나의 번호' 기능 추가**: 사용자 번호 이력 분석 및 알고리즘 진단
- 🔄 **번호 교체 기능**: 진단 결과에 따라 즉시 번호 교체 가능

## v6.1.1 (2026-01-04)\

- ✅ 알고리즘 고도화 : 안정형(Safe) 전략, 결정론적 추천, 상극수/궁합수 반영
- ✅ 모바일 최적화 :반응형 디자인, 터치 친화적

### v5.1.0 (2026-01-04)

- 🔧 **웹 앱 캐싱 시스템 개선**: 파일 수정 시간(mtime) 기반 동적 캐싱 구현
- ✅ 데이터 업데이트 시 자동으로 최신 데이터 반영 (앱 재시작 불필요)
- 📅 날짜 표시 개선: 시간 부분 제거 (2014.06.07 ~ 2026.01.03)
- 📊 **1205회차 데이터 추가** (2026.01.03)
- 🔒 고정 모드 도움말 텍스트 동적 변경
- 🧪 검증 스크립트 추가: `verify_cache_fix.py`, `verify_update.py`
- 🌐 Streamlit Cloud 배포: https://lo645251227.streamlit.app/

### v5.0.0 (2026-01-04)

- 🔄 **텍스트 파싱 기능 추가**: 복사-붙여넣기로 간편하게 데이터 업데이트
- 📋 `text_parser.py` 모듈 신규 개발 (정규표현식 기반)
- 🌐 웹 앱에 "텍스트 파싱 ⭐" 탭 추가 (총 9개 페이지)
- ✅ 실시간 파싱 결과 확인 및 검증
- 💾 자동 백업 시스템 통합
- 🔧 `data_updater.py` 검증 로직 강화

### v4.0.0 (2025-12-28)

- 🎨 그리드 패턴 분석 추가
- 🖼️ 복권 용지 이미지 생성 (604개)
- 📊 그리드 패턴 차트 3개 추가

⭐ **이 프로젝트가 도움이 되었다면 스타를 눌러주세요!**
_주의: 로또는 독립 시행이므로 과거의 데이터가 미래의 결과를 보장하지 않습니다. 본 프로젝트는 통계 분석 및 프로그래밍 학습 목적으로 제작되었습니다._

```

```
